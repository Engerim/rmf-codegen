{"version":3,"file":"commercetools-api-request-builder.umd.js","sources":["../src/features.js","../src/default-services.js","../src/default-params.js","../src/classify.js","../src/build-query-string.js","../src/version.js","../src/data-erasure.js","../src/order-edit-apply.js","../src/query.js","../src/query-id.js","../src/query-location.js","../src/query-expand.js","../src/query-page.js","../src/query-projection.js","../src/query-suggest.js","../src/query-search.js","../src/create-service.js","../src/create-request-builder.js"],"sourcesContent":["/**\n * NOTE:\n *  These are so called implicit features\n *  which work on endpoints automatically as they only\n *  differ in the http method and request body\n *  and do not need any further processing.\n *  We specify these on endpoints for documentation purposes\n *  only.\n */\nexport const create = 'create'\nexport const update = 'update'\n// `delete` is a reserved word in JavaScript\nexport const del = 'delete'\n\n/**\n * NOTE:\n *  These are so called explicit features\n *  which only work on a subset of endpoints and perform\n *  additional manipulation on the request.\n */\nexport const query = 'query'\nexport const queryOne = 'queryOne'\nexport const queryExpand = 'queryExpand'\nexport const queryLocation = 'queryLocation'\nexport const search = 'search'\nexport const projection = 'projection'\nexport const suggest = 'suggest'\n","import * as features from './features'\n\nexport default {\n  login: {\n    type: 'login',\n    endpoint: '/login',\n    features: [features.create],\n  },\n  cartDiscounts: {\n    type: 'cart-discounts',\n    endpoint: '/cart-discounts',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  carts: {\n    type: 'carts',\n    endpoint: '/carts',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  categories: {\n    type: 'categories',\n    endpoint: '/categories',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  channels: {\n    type: 'channels',\n    endpoint: '/channels',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  customerGroups: {\n    type: 'customer-groups',\n    endpoint: '/customer-groups',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  customers: {\n    type: 'customers',\n    endpoint: '/customers',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  customersPassword: {\n    type: 'customers-password',\n    endpoint: '/customers/password',\n    features: [features.create],\n  },\n  customersPasswordToken: {\n    type: 'customers-password-token',\n    endpoint: '/customers/password-token',\n    features: [features.create, features.queryOne],\n  },\n  customersPasswordReset: {\n    type: 'customers-password-reset',\n    endpoint: '/customers/password/reset',\n    features: [features.create],\n  },\n  customersEmailVerificationToken: {\n    type: 'customers-email-verification-token',\n    endpoint: '/customers/customers/email-token',\n    features: [features.create, features.queryOne],\n  },\n  customersEmailVerification: {\n    type: 'customers-email-verification',\n    endpoint: '/customers/customers/email/confirm',\n    features: [features.create],\n  },\n  customObjects: {\n    type: 'custom-objects',\n    endpoint: '/custom-objects',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n    ],\n  },\n  discountCodes: {\n    type: 'discount-codes',\n    endpoint: '/discount-codes',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  extensions: {\n    type: 'extensions',\n    endpoint: '/extensions',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  inventory: {\n    type: 'inventory',\n    endpoint: '/inventory',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  messages: {\n    type: 'messages',\n    endpoint: '/messages',\n    features: [features.query, features.queryOne, features.queryExpand],\n  },\n  myActiveCart: {\n    type: 'my-carts',\n    endpoint: '/me/active-cart',\n    features: [features.queryOne],\n  },\n  myCarts: {\n    type: 'my-carts',\n    endpoint: '/me/carts',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  myOrders: {\n    type: 'my-orders',\n    endpoint: '/me/orders',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  orders: {\n    type: 'orders',\n    endpoint: '/orders',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  orderEdits: {\n    type: 'orders-edits',\n    endpoint: '/orders/edits',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  orderImport: {\n    type: 'orderImport',\n    endpoint: '/orders/import',\n    features: [features.create, features.query],\n  },\n  payments: {\n    type: 'payments',\n    endpoint: '/payments',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  productDiscounts: {\n    type: 'product-discounts',\n    endpoint: '/product-discounts',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  productProjections: {\n    type: 'product-projections',\n    endpoint: '/product-projections',\n    features: [\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n      features.projection,\n    ],\n  },\n  productProjectionsSearch: {\n    type: 'product-projections-search',\n    endpoint: '/product-projections/search',\n    features: [\n      features.search,\n      features.queryOne,\n      features.queryExpand,\n      features.projection,\n    ],\n  },\n  productProjectionsSuggest: {\n    type: 'product-projections-suggest',\n    endpoint: '/product-projections/suggest',\n    features: [\n      features.search,\n      features.suggest,\n      features.queryOne,\n      features.projection,\n    ],\n  },\n  products: {\n    type: 'products',\n    endpoint: '/products',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  productTypes: {\n    type: 'product-types',\n    endpoint: '/product-types',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  project: {\n    type: 'project',\n    endpoint: '/',\n    features: [features.update, features.query],\n  },\n  reviews: {\n    type: 'reviews',\n    endpoint: '/reviews',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  shippingMethods: {\n    type: 'shipping-methods',\n    endpoint: '/shipping-methods',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n      features.queryLocation,\n    ],\n  },\n  shoppingLists: {\n    type: 'shopping-lists',\n    endpoint: '/shopping-lists',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  states: {\n    type: 'states',\n    endpoint: '/states',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  subscriptions: {\n    type: 'subscriptions',\n    endpoint: '/subscriptions',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  taxCategories: {\n    type: 'tax-categories',\n    endpoint: '/tax-categories',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  types: {\n    type: 'types',\n    endpoint: '/types',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n  zones: {\n    type: 'zones',\n    endpoint: '/zones',\n    features: [\n      features.create,\n      features.update,\n      features.del,\n      features.query,\n      features.queryOne,\n      features.queryExpand,\n    ],\n  },\n}\n","/* @flow */\nimport type {\n  ServiceBuilderDefaultParams,\n  ServiceBuilderParams,\n} from 'types/sdk'\nimport * as features from './features'\n\n/**\n * Return the default parameters for building a query string.\n *\n * @return {Object}\n */\nexport function getDefaultQueryParams(): ServiceBuilderDefaultParams {\n  return {\n    id: null,\n    expand: [],\n    pagination: {\n      page: null,\n      perPage: null,\n      sort: [],\n      withTotal: null,\n    },\n    location: {\n      currency: '',\n      country: '',\n      state: '',\n    },\n    query: {\n      operator: 'and',\n      where: [],\n    },\n    searchKeywords: [],\n  }\n}\n\n/**\n * Return the default parameters for building a query search string.\n *\n * @return {Object}\n */\nexport function getDefaultSearchParams(): ServiceBuilderDefaultParams {\n  return {\n    expand: [],\n    searchKeywords: [],\n    pagination: {\n      page: null,\n      perPage: null,\n      sort: [],\n      withTotal: null,\n    },\n    search: {\n      facet: [],\n      filter: [],\n      filterByQuery: [],\n      filterByFacets: [],\n      fuzzy: false,\n      fuzzyLevel: 0,\n      markMatchingVariants: false,\n      text: null,\n    },\n  }\n}\n\n/**\n * Set the default parameters given the current service object.\n *\n * @return {void}\n */\nexport function setDefaultParams() {\n  this.params.expand = getDefaultQueryParams().expand\n\n  if (this.features.includes(features.queryOne))\n    this.params.id = getDefaultQueryParams().id\n\n  if (this.features.includes(features.query)) {\n    this.params.pagination = getDefaultQueryParams().pagination\n    this.params.query = getDefaultQueryParams().query\n  }\n\n  if (this.features.includes(features.search)) {\n    this.params.pagination = getDefaultSearchParams().pagination\n    this.params.search = getDefaultSearchParams().search\n  }\n\n  if (this.features.includes(features.queryLocation))\n    this.params.location = getDefaultQueryParams().location\n\n  if (this.features.includes(features.suggest)) this.params.searchKeywords = []\n}\n\nconst hasKey = (obj: {}, key: string): boolean =>\n  Object.prototype.hasOwnProperty.call(obj, key)\n\n/**\n * Set the supplied parameters given the current service object.\n *\n * @return {void}\n */\nexport function setParams(params: ServiceBuilderParams) {\n  // verify params\n  const knownKeys = [\n    'expand',\n    'id',\n    'key',\n    'customerId',\n    'cartId',\n    'sort',\n    'page',\n    'perPage',\n    'staged',\n    'priceCurrency',\n    'priceCountry',\n    'priceCustomerGroup',\n    'priceChannel',\n    'text',\n    'fuzzy',\n    'fuzzyLevel',\n    'markMatchingVariants',\n    'facet',\n    'filter',\n    'filterByQuery',\n    'filterByFacets',\n    'searchKeywords',\n    'where',\n    'whereOperator',\n    'version',\n    'country',\n    'currency',\n    'state',\n    'dataErasure',\n    'withTotal',\n    'applyOrderEditTo',\n  ]\n  Object.keys(params).forEach((key: string) => {\n    if (!knownKeys.includes(key)) throw new Error(`Unknown key \"${key}\"`)\n  })\n\n  // query-expand\n  if (params.expand)\n    params.expand.forEach((expansion: string) => {\n      this.expand(expansion)\n    })\n\n  // query-id\n  if (hasKey(params, 'id')) this.byId(params.id)\n  if (hasKey(params, 'key')) this.byKey(params.key)\n  if (hasKey(params, 'customerId')) this.byCustomerId(params.customerId)\n  if (hasKey(params, 'cartId')) this.byCartId(params.cartId)\n\n  // query-location\n  if (hasKey(params, 'country')) this.byCountry(params.country)\n  if (hasKey(params, 'currency')) this.byCurrency(params.currency)\n  if (hasKey(params, 'state')) this.byState(params.state)\n\n  // query-page\n  if (params.sort)\n    params.sort.forEach(\n      (sortDesc: { by: string, direction: 'asc' | 'desc' }) => {\n        this.sort(sortDesc.by, sortDesc.direction === 'asc')\n      }\n    )\n  if (hasKey(params, 'page')) this.page(params.page)\n  if (hasKey(params, 'perPage')) this.perPage(params.perPage)\n\n  // query-projection\n  if (hasKey(params, 'staged')) this.staged(params.staged)\n  if (hasKey(params, 'priceCurrency')) this.priceCurrency(params.priceCurrency)\n  if (hasKey(params, 'priceCountry')) this.priceCountry(params.priceCountry)\n  if (hasKey(params, 'priceCustomerGroup'))\n    this.priceCustomerGroup(params.priceCustomerGroup)\n  if (hasKey(params, 'priceChannel')) this.priceChannel(params.priceChannel)\n\n  // query-search\n  if (params.text) this.text(params.text.value, params.text.language)\n  if (params.fuzzy) this.fuzzy() // boolean switch\n  if (hasKey(params, 'fuzzyLevel')) this.fuzzyLevel(params.fuzzyLevel)\n  if (params.markMatchingVariants) this.markMatchingVariants() // boolean switch\n  if (params.facet)\n    params.facet.forEach((facet: string) => {\n      this.facet(facet)\n    })\n  if (params.filter)\n    params.filter.forEach((filter: string) => {\n      this.filter(filter)\n    })\n  if (params.filterByQuery)\n    params.filterByQuery.forEach((query: string) => {\n      this.filterByQuery(query)\n    })\n  if (params.filterByFacets)\n    params.filterByFacets.forEach((facet: string) => {\n      this.filterByFacets(facet)\n    })\n\n  // query-suggest\n  if (params.searchKeywords)\n    params.searchKeywords.forEach(\n      (searchKeyword: { value: string, language: string }) => {\n        this.searchKeywords(searchKeyword.value, searchKeyword.language)\n      }\n    )\n\n  // query\n  if (params.where)\n    params.where.forEach((predicate: string) => {\n      this.where(predicate)\n    })\n  if (hasKey(params, 'whereOperator')) this.whereOperator(params.whereOperator)\n\n  // version\n  if (hasKey(params, 'version')) this.withVersion(params.version)\n\n  // dataErasure\n  if (hasKey(params, 'dataErasure')) this.withFullDataErasure()\n\n  // withTotal\n  if (hasKey(params, 'withTotal')) this.withTotal(params.withTotal)\n\n  // withTotal\n  if (hasKey(params, 'applyOrderEditTo'))\n    this.applyOrderEditTo(params.applyOrderEditTo)\n}\n","/**\n * Given an object, return a clone with non-function properties defined as\n * non-enumerable, unwritable, and unconfigurable.\n *\n * @param {Object}\n * @return {Object}\n */\nexport default function classify(object, forceEnumerable = false) {\n  const clone = {}\n\n  Object.keys(object).forEach(key => {\n    Object.defineProperty(clone, key, {\n      value: object[key],\n      enumerable: forceEnumerable ? true : typeof object[key] === 'function',\n    })\n  })\n\n  return clone\n}\n","/* @flow */\nimport type { ServiceBuilderDefaultParams } from 'types/sdk'\n\n/**\n * Build the query string with the given parameters.\n *\n * @param  {Object} params - An object with query / search parameters.\n * @throws If argument is missing.\n * @return {string} The fully encoded query string.\n */\nexport default function buildQueryString(\n  params: ServiceBuilderDefaultParams\n): string {\n  if (!params) throw new Error('Missing options object to build query string.')\n\n  const {\n    query,\n    pagination,\n    search,\n    expand,\n    staged,\n    priceCurrency,\n    priceCountry,\n    priceCustomerGroup,\n    priceChannel,\n    searchKeywords,\n    version,\n    customerId,\n    cartId,\n    location,\n    dataErasure,\n    applyOrderEditTo,\n  } = params\n  let queryString = []\n\n  if (customerId) queryString.push(`customerId=${customerId}`)\n\n  if (cartId) queryString.push(`cartId=${cartId}`)\n\n  if (typeof staged === 'boolean')\n    queryString.push(`staged=${staged.toString()}`)\n\n  if (priceCurrency) queryString.push(`priceCurrency=${priceCurrency}`)\n\n  if (priceCountry) queryString.push(`priceCountry=${priceCountry}`)\n\n  if (priceCustomerGroup)\n    queryString.push(`priceCustomerGroup=${priceCustomerGroup}`)\n\n  if (priceChannel) queryString.push(`priceChannel=${priceChannel}`)\n\n  if (expand && expand.length)\n    queryString = queryString.concat(\n      expand.map((e: string): string => `expand=${e}`)\n    )\n\n  if (query) {\n    const { operator, where } = query\n    const whereParams = where.join(encodeURIComponent(` ${operator} `))\n    if (whereParams) queryString.push(`where=${whereParams}`)\n  }\n\n  if (location) {\n    const { country, currency, state } = location\n    if (country) queryString.push(`country=${country}`)\n    if (currency) queryString.push(`currency=${currency}`)\n    if (state) queryString.push(`state=${state}`)\n  }\n\n  if (pagination) {\n    const { page, perPage, sort, withTotal } = pagination\n    if (typeof perPage === 'number') queryString.push(`limit=${perPage}`)\n    if (page) {\n      const limitParam = perPage || 20\n      const offsetParam = limitParam * (page - 1)\n      queryString.push(`offset=${offsetParam}`)\n    }\n    if (sort && sort.length)\n      queryString = queryString.concat(\n        sort.map((s: string): string => `sort=${s}`)\n      )\n\n    if (typeof withTotal === 'boolean')\n      queryString.push(`withTotal=${String(withTotal)}`)\n  }\n\n  if (search) {\n    const {\n      text,\n      fuzzy,\n      fuzzyLevel,\n      markMatchingVariants,\n      facet,\n      filter,\n      filterByQuery,\n      filterByFacets,\n    } = search\n\n    if (text) queryString.push(`text.${text.lang}=${text.value}`)\n    if (fuzzy) queryString.push('fuzzy=true')\n    if (fuzzyLevel) queryString.push(`fuzzyLevel=${fuzzyLevel}`)\n    queryString.push(`markMatchingVariants=${markMatchingVariants.toString()}`)\n\n    facet.forEach((f: string): number => queryString.push(`facet=${f}`))\n    filter.forEach((f: string): number => queryString.push(`filter=${f}`))\n    filterByQuery.forEach((f: string): number =>\n      queryString.push(`filter.query=${f}`)\n    )\n    filterByFacets.forEach((f: string): number =>\n      queryString.push(`filter.facets=${f}`)\n    )\n  }\n\n  if (searchKeywords)\n    searchKeywords.forEach((f: { lang: string, value: string }): number =>\n      queryString.push(`searchKeywords.${f.lang}=${f.value}`)\n    )\n\n  if (version) queryString.push(`version=${version}`)\n\n  if (dataErasure) queryString.push(dataErasure)\n\n  if (applyOrderEditTo) queryString.push(`/${applyOrderEditTo}/apply`)\n\n  return queryString.join('&')\n}\n","/* @flow */\n/**\n * Set the `version` number to the internal state of the service instance\n * in order to generate a uri with the resource version (for example; to\n * perform a `DELETE` request)\n *\n * @param  {number} version - The version of the resource\n * @throws if `version` is missing or not a number.\n * @return {Object} The instance of the service, can be chained.\n */\n\nexport default function withVersion(version: number): Object {\n  if (typeof version !== 'number')\n    throw new Error('A resource version is missing or invalid')\n  this.params.version = version\n  return this\n}\n","/* @flow */\n/**\n * Set the `dataErasure` option to the internal state of the service instance\n * in order to generate a DELETE uri that guarantees that all personal data related to\n * the particular object, including invisible data, is erased, in compliance with the GDPR.\n *\n * Users are, however, responsible for identifying and deleting all objects that belong to a customer, and deleting them.\n *\n * More info here: https://docs.commercetools.com/release-notes#releases-2018-05-24-data-erasure\n *\n * @return {Object} The instance of the service, can be chained.\n */\n\nexport default function withFullDataErasure(): Object {\n  this.params.dataErasure = 'dataErasure=true'\n  return this\n}\n","/* @flow */\n/**\n * `Apply an OrderEdit` to an `order` by providing a correct Order Edit ID\n *\n * More info here: https://docs.commercetools.com/http-api-projects-order-edits#apply-an-orderedit\n *\n * @param {string} orderEditId - The ID of the Order Edit.\n *\n * @return {Object} The instance of the service, can be chained.\n */\n\nexport default function applyOrderEditTo(orderEditId: string): Object {\n  if (typeof orderEditId !== 'string')\n    throw new Error('A resource orderEditId is missing or invalid')\n  this.params.applyOrderEditTo = orderEditId\n  return this\n}\n","/**\n * Set the given `predicate` to the internal state of the service instance.\n *\n * @param  {string} predicate - A non-URI encoded string representing a\n * [Predicate]{@link http://dev.sphere.io/http-api.html#predicates}\n * @throws If `predicate` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function where(predicate: string): Object {\n  if (!predicate) throw new Error('Required argument for `where` is missing')\n\n  const encodedPredicate = encodeURIComponent(predicate)\n  this.params.query.where.push(encodedPredicate)\n  return this\n}\n\n/**\n * Set the logical operator to combine multiple query predicates\n * {@link module:commons/query.where}\n *\n * @param  {string} operator - A logical operator `and`, `or`\n * @throws If `operator` is missing or has a wrong value.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function whereOperator(operator: 'and' | 'or'): Object {\n  if (!operator)\n    throw new Error('Required argument for `whereOperator` is missing')\n  if (!(operator === 'and' || operator === 'or'))\n    throw new Error(\n      'Required argument for `whereOperator` is invalid, ' +\n        'allowed values are (`and`, `or`)'\n    )\n\n  this.params.query.operator = operator\n  return this\n}\n","/* @flow */\n/**\n * Set the given `id` to the internal state of the service instance.\n *\n * @param  {string} id - A resource `UUID`\n * @throws If `id` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byId(id: string): Object {\n  if (!id) throw new Error('Required argument for `byId` is missing')\n  if (this.params.key)\n    throw new Error(\n      'A key for this resource has already been set. ' +\n        'You cannot use both `byKey` and `byId`.'\n    )\n  if (this.params.customerId)\n    throw new Error(\n      'A customerId for this resource has already been set. ' +\n        'You cannot use both `byId` and `byCustomerId`.'\n    )\n\n  if (this.params.cartId)\n    throw new Error(\n      'A cartId for this resource has already been set. ' +\n        'You cannot use both `byId` and `byCartId`.'\n    )\n\n  this.params.id = id\n  return this\n}\n\n/**\n * Set the given `key` to the internal state of the service instance.\n *\n * @param  {string} key - A resource `key`\n * @throws If `key` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byKey(key: string): Object {\n  if (!key) throw new Error('Required argument for `byKey` is missing')\n  if (this.params.id)\n    throw new Error(\n      'An ID for this resource has already been set. ' +\n        'You cannot use both `byId` and `byKey`.'\n    )\n\n  this.params.key = key\n  return this\n}\n\n/**\n * Set the given `id` to the `customerId`internal state of the service instance.\n * For querying customer carts\n *\n * @param  {string} id - A resource `UUID`\n * @throws If `id` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byCustomerId(custId: string): Object {\n  if (!custId)\n    throw new Error('Required argument for `byCustomerId` is missing')\n  if (this.params.id)\n    throw new Error(\n      'An ID for this resource has already been set. ' +\n        'You cannot use both `byId` and `byCustomerId`.'\n    )\n\n  this.params.customerId = custId\n  return this\n}\n\n/**\n * Set the given `id` to the `cartId` internal state of the service instance.\n * For querying shipping methods by cart id\n *\n * @param  {string} id - A resource `UUID`\n * @throws If `id` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byCartId(cartId: string): Object {\n  if (!cartId) throw new Error('Required argument for `byCartId` is missing')\n  if (this.params.id)\n    throw new Error(\n      'An ID for this resource has already been set. ' +\n        'You cannot use both `byId` and `byCartId`.'\n    )\n\n  this.params.cartId = cartId\n  return this\n}\n","/* @flow */\n\n/**\n * Set the given `country` param used for selection by country\n *\n * @param  {string} value - A two-digit country code as per ISO 3166-1 alpha-2\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byCountry(value: string): Object {\n  if (!value) throw new Error('Required argument for `byCountry` is missing')\n\n  this.params.location.country = value\n  return this\n}\n\n/**\n * Set the given `currency` param used for selection by currency.\n *\n * @param  {string} value - The currency code compliant to ISO 4217\n * Can only be used with country parameter\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byCurrency(value: string): Object {\n  if (!value) throw new Error('Required argument for `byCurrency` is missing')\n\n  // logic to verify country has been set\n  if (!this.params.location.country)\n    throw new Error(\n      'A `country` for this resource has not been set. ' +\n        'You must set the country in order to use the `byCurrency` method.'\n    )\n\n  this.params.location.currency = value\n  return this\n}\n\n/**\n * Set the given `state` param used for selection by state.\n *\n * @param  {string} value - A string representing State name\n * Can only be used with country parameter\n * @return {Object} The instance of the service, can be chained.\n */\nexport function byState(value: string): Object {\n  if (!value) throw new Error('Required argument for `byState` is missing')\n\n  // logic to verify country has been set\n  if (!this.params.location.country)\n    throw new Error(\n      'A `country` for this resource has not been set. ' +\n        'You must set the country in order to use the `byState` method.'\n    )\n\n  this.params.location.state = value\n  return this\n}\n","/* @flow */\n/**\n * Set the\n * [ExpansionPath](http://dev.sphere.io/http-api.html#reference-expansion)\n * used for expanding a\n * [Reference](http://dev.sphere.io/http-api-types.html#reference)\n * of a resource.\n *\n * @param  {string} value - The expand path expression.\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport function expand(value: string): Object {\n  if (!value) throw new Error('Required argument for `expand` is missing')\n\n  const encodedPath = encodeURIComponent(value)\n  // Note: this goes to base `params`, not `params.query`\n  // to be compatible with search.\n  this.params.expand.push(encodedPath)\n  return this\n}\n","/* @flow */\n/**\n * Set the sort expression for the query, if the related endpoint supports it.\n * It is possible to specify several `sort` parameters.\n * In this case they are combined into a composed `sort` where the results\n * are first sorted by the first expression, followed by equal values being\n * sorted according to the second expression, and so on.\n *\n * @param  {string} sortPath - The sort path expression.\n * @param  {boolean} [ascending] - Whether the direction should be\n * ascending or not (default: `true`).\n * @throws If `sortPath` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function sort(sortPath: string, ascending: boolean = true): Object {\n  if (!sortPath) throw new Error('Required argument for `sort` is missing')\n\n  const direction = ascending ? 'asc' : 'desc'\n  const encodedSort = encodeURIComponent(`${sortPath} ${direction}`)\n  this.params.pagination.sort.push(encodedSort)\n  return this\n}\n\n/**\n * Set the page number to be requested from the complete query result\n * (used for pagination as `offset`)\n *\n * @param  {string} value - The page number, greater then zero.\n * @throws If `value` is missing or is a number lesser then one.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function page(value: number): Object {\n  if (typeof value !== 'number' && !value)\n    throw new Error('Required argument for `page` is missing or invalid')\n\n  if (typeof value !== 'number' || value < 1)\n    throw new Error('Required argument for `page` must be a number >= 1')\n\n  this.params.pagination.page = value\n  return this\n}\n\n/**\n * Set the number of results to be returned from a query result\n * (used for pagination as `limit`)\n *\n * @param  {string} value - How many results in a page,\n * greater or equals then zero.\n * @throws If `value` is missing or is a number lesser then zero.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function perPage(value: number): Object {\n  if (typeof value !== 'number' && !value)\n    throw new Error('Required argument for `perPage` is missing or invalid')\n\n  if (typeof value !== 'number' || value < 0)\n    throw new Error('Required argument for `perPage` must be a number >= 0')\n\n  this.params.pagination.perPage = value\n  return this\n}\n\n/**\n * Set whether or not the total should be calculated (and included) in the result\n * of a paginated query result.\n *\n * @param {boolean} value - indicating if the total should be included or not\n */\nexport function withTotal(value: boolean = true): Object {\n  if (typeof value !== 'boolean')\n    throw new Error('Required argument for `withTotal` is missing or invalid')\n\n  this.params.pagination.withTotal = value\n  return this\n}\n","/* @flow */\n/**\n * Define whether to get the staged or current projection\n *\n * @param  {boolean} staged - Either `true` (default) or `false`\n * (for current / published)\n * @return {Object} The instance of the service, can be chained.\n */\nexport function staged(shouldFetchStaged: boolean = false): Object {\n  this.params.staged = shouldFetchStaged\n  return this\n}\n\n/**\n * Define whether to set price Selection or not\n * Set the given `priceCurrency` param used for price selection.\n *\n * @param  {string} value - The currency code compliant to ISO 4217\n * @return {Object} The instance of the service, can be chained.\n */\nexport function priceCurrency(value: string): Object {\n  this.params.priceCurrency = value\n  return this\n}\n\n/**\n * Define whether to set price Selection or not\n * Set the given `priceCountry` param used for price selection.\n *\n * @param  {string} value - A two-digit country code as per ISO 3166-1 alpha-2\n * Can only be used with priceCurrency parameter\n * @return {Object} The instance of the service, can be chained.\n */\nexport function priceCountry(value: string): Object {\n  this.params.priceCountry = value\n  return this\n}\n\n/**\n * Define whether to set price Selection or not\n * Set the given `priceCustomerGroup` param used for price selection.\n *\n * @param  {string} value - price customer group UUID\n * Can only be used with priceCurrency parameter\n * @return {Object} The instance of the service, can be chained.\n */\nexport function priceCustomerGroup(value: string): Object {\n  this.params.priceCustomerGroup = value\n  return this\n}\n\n/**\n * Define whether to set price Selection or not\n * Set the given `priceChannel` param used for price selection.\n *\n * @param  {string} value - price channel UUID\n * Can only be used with priceCurrency parameter\n * @return {Object} The instance of the service, can be chained.\n */\nexport function priceChannel(value: string): Object {\n  this.params.priceChannel = value\n  return this\n}\n","/* @flow */\n/**\n * Define a Suggestion used for matching tokens for product projections,\n * via a suggest tokenizer.\n *\n * The suggestions can be used to implement a basic auto-complete functionality.\n * The source of data for suggestions is the searchKeyword field in a product.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * text to search for.\n * @param  {string} lang - An ISO language tag, used for search\n * the given text in localized content.\n * @throws If `value` or `lang` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport function searchKeywords(value: string, lang: string): Object {\n  if (!value || !lang)\n    throw new Error('Required arguments for `searchKeywords` are missing')\n\n  this.params.searchKeywords.push({ lang, value: encodeURIComponent(value) })\n  return this\n}\n","/* @flow */\n/**\n * Set the given `text` param used for full-text search.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * text to search for.\n * @param  {string} lang - An ISO language tag, used for search\n * the given text in localized content.\n * @throws If `value` or `lang` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function text(value: string, lang: string): Object {\n  if (!value || !lang)\n    throw new Error('Required arguments for `text` are missing')\n\n  this.params.search.text = { lang, value: encodeURIComponent(value) }\n  return this\n}\n\n/**\n * Define whether to enable the fuzzy search.\n *\n * @return {Object} The instance of the service, can be chained.\n */\nexport function fuzzy(): Object {\n  this.params.search.fuzzy = true\n  return this\n}\n\n/**\n * Define the level of the fuzzy search\n *\n * @param  {number} value - An integer representing the fuzzy level\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function fuzzyLevel(value: number): Object {\n  if (!value) throw new Error('Required argument for `fuzzyLevel` is missing')\n  this.params.search.fuzzyLevel = value\n  return this\n}\n\n/**\n * Define whether to enable markMatchingVariants\n *\n * @return {Object} The instance of the service, can be chained.\n */\nexport function markMatchingVariants(): Object {\n  this.params.search.markMatchingVariants = true\n  return this\n}\n\n/**\n * Set the given `facet` filter used for calculating statistical counts.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * facet expression.\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function facet(value: string): Object {\n  if (!value) throw new Error('Required argument for `facet` is missing')\n\n  const encodedFacet = encodeURIComponent(value)\n  this.params.search.facet.push(encodedFacet)\n  return this\n}\n\n/**\n * Set the given `filter` param used for filtering search results.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * filter expression.\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function filter(value: string): Object {\n  if (!value) throw new Error('Required argument for `filter` is missing')\n\n  const encodedFilter = encodeURIComponent(value)\n  this.params.search.filter.push(encodedFilter)\n  return this\n}\n\n/**\n * Set the given `filter.query` param used for filtering search results.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * filter by query expression.\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function filterByQuery(value: string): Object {\n  if (!value)\n    throw new Error('Required argument for `filterByQuery` is missing')\n\n  const encodedFilter = encodeURIComponent(value)\n  this.params.search.filterByQuery.push(encodedFilter)\n  return this\n}\n\n/**\n * Set the given `filter.facets` param used for filtering search results.\n *\n * @param  {string} value - A non-URI encoded string representing a\n * filter by query expression.\n * @throws If `value` is missing.\n * @return {Object} The instance of the service, can be chained.\n */\nexport function filterByFacets(value: string): Object {\n  if (!value)\n    throw new Error('Required argument for `filterByFacets` is missing')\n\n  const encodedFilter = encodeURIComponent(value)\n  this.params.search.filterByFacets.push(encodedFilter)\n  return this\n}\n","/* @flow */\nimport type {\n  ServiceBuilder,\n  ServiceBuilderDefinition,\n  ServiceBuilderParams,\n} from 'types/sdk'\n\nimport {\n  getDefaultQueryParams,\n  getDefaultSearchParams,\n  setDefaultParams,\n  setParams,\n} from './default-params'\nimport classify from './classify'\nimport buildQueryString from './build-query-string'\nimport withVersion from './version'\nimport withFullDataErasure from './data-erasure'\nimport applyOrderEditTo from './order-edit-apply'\nimport * as defaultFeatures from './features'\nimport * as query from './query'\nimport * as queryId from './query-id'\nimport * as queryLocation from './query-location'\nimport * as queryExpand from './query-expand'\nimport * as queryPage from './query-page'\nimport * as queryProjection from './query-projection'\nimport * as querySuggest from './query-suggest'\nimport * as querySearch from './query-search'\n\ntype UseKey = {\n  withProjectKey: boolean,\n  applyOrderEdit: boolean,\n}\n\nconst requiredDefinitionProps = ['type', 'endpoint', 'features']\n\nfunction getIdOrKey(params: Object): string {\n  if (params.id) return `/${params.id}`\n  if (params.key) return `/key=${params.key}`\n  return ''\n}\n\nexport default function createService(\n  definition: ServiceBuilderDefinition,\n  options: string = ''\n): ServiceBuilder {\n  if (!definition)\n    throw new Error('Cannot create a service without its definition.')\n\n  requiredDefinitionProps.forEach((key: string) => {\n    if (!definition[key])\n      throw new Error(`Definition is missing required parameter ${key}.`)\n  })\n\n  if (!Array.isArray(definition.features) || !definition.features.length)\n    throw new Error('Definition requires `features` to be a non empty array.')\n\n  if (!options)\n    throw new Error('No project defined. Please enter a project key')\n\n  const { type, endpoint, features } = definition\n\n  return classify({\n    type,\n    features,\n    params: getDefaultQueryParams(),\n    withVersion,\n    withFullDataErasure,\n    applyOrderEditTo,\n\n    ...features.reduce((acc: Object, feature: string): Object => {\n      if (feature === defaultFeatures.query)\n        return {\n          ...acc,\n          ...query,\n          ...queryPage,\n        }\n\n      if (feature === defaultFeatures.queryOne)\n        return {\n          ...acc,\n          ...queryId,\n        }\n\n      if (feature === defaultFeatures.queryLocation)\n        return {\n          ...acc,\n          ...queryLocation,\n        }\n\n      if (feature === defaultFeatures.queryExpand)\n        return {\n          ...acc,\n          ...queryExpand,\n        }\n\n      if (feature === defaultFeatures.search)\n        return {\n          ...acc,\n          ...querySearch,\n          ...queryPage,\n          params: getDefaultSearchParams(),\n        }\n\n      if (feature === defaultFeatures.suggest)\n        return {\n          ...acc,\n          ...querySearch,\n          ...queryPage,\n          ...querySuggest,\n        }\n\n      if (feature === defaultFeatures.projection)\n        return {\n          ...acc,\n          ...queryProjection,\n        }\n\n      return acc\n    }, {}),\n\n    // Call this method to get the built request URI\n    // Pass some options to further configure the URI:\n    // - `withProjectKey: false`: will omit the projectKey from the URI\n    build(\n      uriOptions: UseKey = { withProjectKey: true, applyOrderEdit: false }\n    ): string {\n      const { withProjectKey, applyOrderEdit } = uriOptions\n\n      const queryParams = buildQueryString(this.params)\n\n      const uri =\n        (withProjectKey ? `/${options}` : '') +\n        endpoint +\n        // TODO this can lead to invalid URIs as getIdOrKey can return\n        //   \"/?customerId\", so there can be multiple question marks,\n        // same for when `queryParams` and `version` are present\n        getIdOrKey(this.params) +\n        (queryParams && !applyOrderEdit ? `?${queryParams}` : queryParams)\n\n      setDefaultParams.call(this)\n      return uri\n    },\n\n    // Call this method to parse an object as params\n    parse(params: ServiceBuilderParams): Object {\n      setParams.call(this, params)\n      return this\n    },\n  })\n}\n","/* @flow */\nimport type { ApiRequestBuilder } from 'types/sdk'\n\nimport services from './default-services'\nimport createService from './create-service'\n\n// pass an options argument of type object containing\n// the `projectkey` (string) and `customServices` (object)\n// The projectKey property is required\n// A sample options object would be:\n//\n//     options: {\n//       projectKey: 'myProject',\n//       customServices: {\n//         foo: {\n//           type: 'foo',\n//           endpoint: '/foo',\n//           features: [\n//             features.query,\n//           ],\n//         }\n//       }\n//     }\nexport default function createRequestBuilder(\n  options: Object = {}\n): ApiRequestBuilder {\n  const allServices = { ...services, ...options.customServices }\n\n  return Object.keys(allServices).reduce(\n    // a return type object is not allowed in flow due to a bug (https://github.com/facebook/flow/issues/5182)\n    /* eslint-disable-next-line */\n    // $FlowFixMe\n    (acc: {}, key: string) => ({\n      ...acc,\n      [key]: createService(allServices[key], options.projectKey),\n    }),\n    {}\n  )\n}\n"],"names":["create","update","del","query","queryOne","queryExpand","queryLocation","search","projection","suggest","login","type","endpoint","features","cartDiscounts","carts","categories","channels","customerGroups","customers","customersPassword","customersPasswordToken","customersPasswordReset","customersEmailVerificationToken","customersEmailVerification","customObjects","discountCodes","extensions","inventory","messages","myActiveCart","myCarts","myOrders","orders","orderEdits","orderImport","payments","productDiscounts","productProjections","productProjectionsSearch","productProjectionsSuggest","products","productTypes","project","reviews","shippingMethods","shoppingLists","states","subscriptions","taxCategories","types","zones","getDefaultQueryParams","id","expand","pagination","page","perPage","sort","withTotal","location","currency","country","state","operator","where","searchKeywords","getDefaultSearchParams","facet","filter","filterByQuery","filterByFacets","fuzzy","fuzzyLevel","markMatchingVariants","text","setDefaultParams","params","includes","hasKey","obj","key","Object","prototype","hasOwnProperty","call","setParams","knownKeys","keys","forEach","Error","expansion","byId","byKey","byCustomerId","customerId","byCartId","cartId","byCountry","byCurrency","byState","sortDesc","by","direction","staged","priceCurrency","priceCountry","priceCustomerGroup","priceChannel","value","language","searchKeyword","predicate","whereOperator","withVersion","version","withFullDataErasure","applyOrderEditTo","classify","object","forceEnumerable","clone","defineProperty","enumerable","buildQueryString","dataErasure","queryString","push","toString","length","concat","map","e","whereParams","join","encodeURIComponent","limitParam","offsetParam","s","String","lang","f","orderEditId","encodedPredicate","custId","encodedPath","sortPath","ascending","encodedSort","shouldFetchStaged","encodedFacet","encodedFilter","requiredDefinitionProps","getIdOrKey","createService","definition","options","Array","isArray","reduce","acc","feature","defaultFeatures","queryPage","queryId","querySearch","querySuggest","queryProjection","build","uriOptions","withProjectKey","applyOrderEdit","queryParams","uri","parse","createRequestBuilder","allServices","services","customServices","projectKey"],"mappings":"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"}