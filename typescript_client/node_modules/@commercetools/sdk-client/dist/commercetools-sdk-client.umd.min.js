!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("querystring")):"function"==typeof define&&define.amd?define(["exports","querystring"],r):r((e=e||self).CommercetoolsSdkClient={},e.qs)}(this,function(e,v){"use strict";function b(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(e){var r,t,o;r=n,o=i[t=e],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})}return n}function t(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],o=!0,n=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(t.push(s.value),!r||t.length!==r);o=!0);}catch(e){n=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(n)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}v=v&&v.hasOwnProperty("default")?v.default:v;var o=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];function r(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{allowedMethods:o};if(!r)throw new Error('The "'.concat(e,'" function requires a "Request" object as an argument. See https://commercetools.github.io/nodejs/sdk/Glossary.html#clientrequest'));if("string"!=typeof r.uri)throw new Error('The "'.concat(e,'" Request object requires a valid uri. See https://commercetools.github.io/nodejs/sdk/Glossary.html#clientrequest'));if(!t.allowedMethods.includes(r.method))throw new Error('The "'.concat(e,'" Request object requires a valid method. See https://commercetools.github.io/nodejs/sdk/Glossary.html#clientrequest'))}e.createClient=function(o){if(!o)throw new Error("Missing required options");if(o.middlewares&&!Array.isArray(o.middlewares))throw new Error("Middlewares should be an array");if(!o.middlewares||!Array.isArray(o.middlewares)||!o.middlewares.length)throw new Error("You need to provide at least one middleware");return{execute:function(t){return r("exec",t),new Promise(function(e,r){(function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return 1===(r=r.filter(function(e){return"function"==typeof e})).length?r[0]:r.reduce(function(e,r){return function(){return e(r.apply(void 0,arguments))}})}).apply(void 0,n(o.middlewares))(function(e,r){if(r.error)r.reject(r.error);else{var t={body:r.body||{},statusCode:r.statusCode};r.headers&&(t.headers=r.headers),r.request&&(t.request=r.request),r.resolve(t)}})(t,{resolve:e,reject:r,body:void 0,error:void 0})})},process:function(y,m,e){var p=this;if(r("process",y,{allowedMethods:["GET"]}),"function"!=typeof m)throw new Error('The "process" function accepts a "Function" as a second argument that returns a Promise. See https://commercetools.github.io/nodejs/sdk/api/sdkClient.html#processrequest-processfn-options');var w=b({total:Number.POSITIVE_INFINITY,accumulate:!0},e);return new Promise(function(c,u){var e=t(y.uri.split("?"),2),l=e[0],r=e[1],d=b({limit:20},b({},v.parse(r))),f=!1,h=w.total;!function s(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=d.limit<h?d.limit:h,t=v.stringify(b({},d,{limit:r})),o=b({sort:"id asc",withTotal:!1},e?{where:'id > "'.concat(e,'"')}:{}),n=v.stringify(o),i=b({},y,{uri:"".concat(l,"?").concat(n,"&").concat(t)});p.execute(i).then(function(e){var r=e.body,n=r.results,i=r.count;i||!f?Promise.resolve(m(e)).then(function(e){var r;if(f=!0,w.accumulate&&(r=a.concat(e||[])),h-=i,i<d.limit||!h)c(r||[]);else{var t=n[i-1],o=t&&t.id;s(o,r)}}).catch(u):c(a||[])}).catch(u)}()})}}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=commercetools-sdk-client.umd.min.js.map
